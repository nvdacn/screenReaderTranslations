12. Дополнительные темы

12.1. Новые назначения клавиш и других жестов ввода
основная начало области
Для своих скриптов пользователи могут назначать новые или изменять уже установленные жесты ввода (такие как нажатия клавиш) в специальном файле, который
легко найти в папке пользовательских настроек NVDA. Он называется gestures.ini.

Файл содержит несколько секций, в каждой из которых может быть одна или больше записей. Каждая секция предоставляет сопоставления скриптов для отдельного
модуля Python и класса внутри NVDA.

список из 3 элементов
•Имя секции будет выглядеть как название модуля Python и имя класса разделенные точкой (.).
•Ключом каждой записи является имя скрипта, к которому будут привязаны жесты ввода. Для отмены привязки по умолчанию можно использовать ключ None.
•Значением записи является разделенный запятыми (,) список идентификаторов для сопоставляемых жестов ввода.
конец списка

В идентификатор входят две буквы, означающие код устройства (kb — для клавиатуры и br — для брайлевского дисплея), а также, необязательно, в круглых скобках
тип устройства или раскладка клавиатуры. Затем, двоеточие (:) и название одной или нескольких клавиш разделенных значком плюс (+).

Для того, чтобы узнать идентификаторы жестов, названия скриптов, имена классов и модулей, в которых они находятся, вы можете:

список из 5 элементов
1Включить «Справку при вводе» (NVDA+1).
2Осуществить жест (например, нажать клавишу).
3Выключить «Справку при вводе» (NVDA+1).
4Просмотреть лог в меню сервис NVDA.
5Просмотреть последние записи лога. Одна из них предоставит вам исчерпывающую информацию про нужный вам жест ввода, а именно модуль.класс и скрипт, если
тот на него назначен.
конец списка

Ниже приведен пример, как вы можете назначить комбинацию клавиш NVDA+shift+t на скрипт, который сообщает дату и время.

Чтобы обнаружить правильное название скрипта и модуль.класс для сообщения даты и времени, включите режим справки при вводе и нажмите NVDA+f12 (поскольку
сейчас именно этот жест отвечает за сообщение даты и времени). Выключите режим справки при вводе и откройте лог.

Внизу вы увидите:

INFO — inputCore.InputManager._handleInputHelp (13:17:22):Input help: gesture kb(desktop):nvda+f12, bound to script dateTime on globalCommands.GlobalCommands

Тут вы можете увидеть, что скрипт называется dateTime, а модуль.класс — это globalCommands.GlobalCommands.

Если такого файла еще нет, создайте текстовый файл с именем gestures.ini в папке пользовательских настроек и напишите туда следующее:

[globalCommands.GlobalCommands]dateTime = kb:NVDA+shift+t

Это назначит на комбинацию клавиш NVDA+shift+t (с любой раскладкой) скрипт dateTime.

Обратите внимание, привязка по умолчанию NVDA+f12 тоже будет работать.

Если вы хотите избавиться от этой привязки, добавьте следующую строку:

None = kb:NVDA+f12

Хотя вы можете свободно назначать скрипты на любую доступную клавишу, с alt могут возникнуть проблемы. NVDA все равно передает клавиши-модификаторы (такие
как shift, control и alt) операционной системе, даже если они закреплены за скриптами. Таким образом, если вы используете alt в жесте, нажатие этой клавиши
может активировать панель меню точно так же, как и запустить ваш скрипт. Потому, лучше будет использовать Shift, control вместе с клавишей-модификатором
NVDA.


12.2  Улучшенная настройка произношения символа.

Возможно настроить произношение пунктуации и других символов перед тем как закончить использование диалога настройки пунктуации / произношение символа. Например, можете определить, должен ли необработанный символ быть отправлен в синтезатор (например, чтобы вызвать паузу или для изменения перегиба) и можете добавить пользовательские символы.
Для того чтобы сделать это, вы должны отредактировать файл Информация о произношении символа в вашей папке пользовательских настроек NVDA. Этот файл называется symbols-xx.dic, где xx это код языка. Формат этого файла задокументирован в секции произношение символа, в руководстве разработчика NVDA, которое доступно на web сайте NVDA, в разделе разработка.
Однако, это невозможно для пользователей определяющих комплексные символы.